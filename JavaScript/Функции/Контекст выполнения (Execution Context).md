**Контекст выполнения** – внутренняя среда, которую создаёт JavaScript-движок для выполнения кода.  
Он формируется каждый раз, когда:
- запускается скрипт (глобальный контекст),
- вызывается функция,
- выполняется `eval` (редко используется).

---

### Этапы создания

1. **Создание (Creation phase)**  
   - Определяется **лексическое окружение (Lexical Environment)**:  
     - Переменные и функции, объявленные в данном контексте.  
     - Ссылки на внешние окружения (scope chain).  
   - Определяется **значение `this`**.  
   - Подготавливается память для всех переменных:  
     - `var` инициализируется `undefined`,  
     - `let` и `const` попадают в TDZ (временную мёртвую зону).

2. **Выполнение (Execution phase)**  
   - Переменным присваиваются значения.  
   - Выполняются инструкции.  
   - Вызываются функции.

---

### Состав контекста выполнения

1. **Lexical Environment (Лексическое окружение)**  
   - Содержит переменные, функции и ссылки на внешние окружения.  

2. **`this`**  
   - Ссылка на объект, который является контекстом вызова функции.  
   - Определяется в момент вызова.  

3. **Scope chain (цепочка областей видимости)**  
   - Механизм поиска переменных: сначала в текущем окружении, затем в родительских, до глобального.

---

### Типы контекстов

- **Глобальный контекст**  
  Создаётся один раз при запуске скрипта.  
  `this` указывает на глобальный объект (`window` в браузере, `global` в Node.js).  
- **Контекст функции**  
  Создаётся при каждом вызове функции.  
  `this` зависит от способа вызова.  
- **Контекст блока (ES6)**  
  Создаётся для конструкций `if`, `for`, `while` при использовании `let` и `const`.  

---

### Важные моменты

- Контекст выполнения создаётся заново при каждом вызове функции.  
- У каждой функции свой собственный контекст.  
- `this` не привязан к функции при её объявлении, а определяется при вызове.  
- Замыкания позволяют функциям «помнить» внешние лексические окружения даже после завершения их выполнения.
