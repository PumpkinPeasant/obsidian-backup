## 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–ª–∞–≥–∏–Ω–∞
–ü–ª–∞–≥–∏–Ω ‚Äî —ç—Ç–æ –æ–±—ã—á–Ω—ã–π –æ–±—ä–µ–∫—Ç —Å —Ö—É–∫–∞–º–∏ (hooks).
```ts
import { Plugin } from "vite";

export default function myPlugin(): Plugin {
  return {
    name: "my-plugin", // –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ

    // –•—É–∫–∏ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
    transform(code, id) {
      // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–¥–∞
    },
    configureServer(server) {
      // —Ä–∞–±–æ—Ç–∞ —Å dev-—Å–µ—Ä–≤–µ—Ä–æ–º
    },
    resolveId(source, importer) {
      // –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—É—Ç–µ–π
    },
    load(id) {
      // –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
    },
  };
}
```

---

## 2. Hook: `transform`

- –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å –∫–æ–¥ –ø–µ—Ä–µ–¥ –æ—Ç–¥–∞—á–µ–π –±—Ä–∞—É–∑–µ—Ä—É.

–ü—Ä–∏–º–µ—Ä: –¥–æ–±–∞–≤–ª—è–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ –∫–∞–∂–¥—ã–π `.js` —Ñ–∞–π–ª.

```ts
transform(code, id) {
  if (id.endsWith(".js")) {
    return {
      code: `// Injected by myPlugin\n${code}`,
      map: null,
    };
  }
}
```

---

## 3. Hook: `configureServer`

- –î–æ—Å—Ç—É–ø –∫ dev-—Å–µ—Ä–≤–µ—Ä—É Vite (–Ω–∞ –±–∞–∑–µ Koa).
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å middleware.

–ü—Ä–∏–º–µ—Ä: –≤—ã–≤–æ–¥–∏—Ç—å –ª–æ–≥ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ.

```ts
configureServer(server) {
  server.middlewares.use((req, res, next) => {
    console.log("Request URL:", req.url);
    next();
  });
}
```

---

## 4. Hook: `resolveId`

- –£–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–º, –∫–∞–∫ Vite –∏—â–µ—Ç –º–æ–¥—É–ª–∏.
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç—ã –∏ –ø–æ–¥–º–µ–Ω—è—Ç—å.

–ü—Ä–∏–º–µ—Ä: –∏–º–ø–æ—Ä—Ç `virtual:env` –±—É–¥–µ—Ç —Ä–µ–∑–æ–ª–≤–∏—Ç—å—Å—è –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å.

```ts
resolveId(source) {
  if (source === "virtual:env") {
    return source; // —É–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ –º–æ–¥—É–ª—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π
  }
}
```

---

## 5. Hook: `load`

- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π.

–ü—Ä–∏–º–µ—Ä: —Å–æ–∑–¥–∞—ë–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å `virtual:env`.

```ts
load(id) {
  if (id === "virtual:env") {
    return `export const ENV = "development";`;
  }
}
```

---

## 6. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞

`vite.config.ts`:

```ts
import { defineConfig } from "vite";
import vue from "@vitejs/plugin-vue";
import myPlugin from "./plugins/myPlugin";

export default defineConfig({
  plugins: [vue(), myPlugin()],
});
```

---

üîë **–ò—Ç–æ–≥:**

- `transform` ‚Üí –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
- `configureServer` ‚Üí —Ä–∞–±–æ—Ç–∞ —Å dev-—Å–µ—Ä–≤–µ—Ä–æ–º (middleware, API-–∑–∞–≥–ª—É—à–∫–∏)
- `resolveId` ‚Üí –∫–∞—Å—Ç–æ–º–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤ (–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏)
- `load` ‚Üí –ø–æ–¥–≥—Ä—É–∑–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π

üëâ –ü–ª–∞–≥–∏–Ω—ã Vite —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å Rollup API, –Ω–æ –∏–º–µ—é—Ç –∏ —Å–≤–æ–∏ dev-—Å–µ—Ä–≤–µ—Ä —Ö—É–∫–∏.